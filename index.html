<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ë¶„ì„ê¸° ê¸°ë°˜ ì˜ˆì¸¡ ê²°ê³¼</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #eee; padding: 20px; }
    h1 { color: #ff4081; }
    h2 { color: #4fc3f7; border-bottom: 1px solid #4fc3f7; padding-bottom: 5px; }
    .block { margin-bottom: 30px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #444; padding: 8px; text-align: center; }
    th { background-color: #222; }
    td { background-color: #1c1c1c; }
    .round-info { text-align: center; font-size: 1.3rem; margin-bottom: 20px; color: #80d8ff; }
  </style>
</head>
<body>
  <h1>ğŸ¯ ë¶„ì„ê¸° ê¸°ë°˜ ì˜ˆì¸¡ Top3</h1>
  <div class="round-info" id="round-display">ì˜ˆì¸¡ íšŒì°¨: ...</div>
  <div id="results"></div>

  <script>
    fetch("/predict_analysis")
      .then(res => res.json())
      .then(data => {
        const round = data["ì˜ˆì¸¡íšŒì°¨"] || "?";
        document.getElementById("round-display").textContent = `ì˜ˆì¸¡ íšŒì°¨: ${round}`;

        const results = document.getElementById("results");
        for (const [label, predictions] of Object.entries(data)) {
          if (label === "ì˜ˆì¸¡íšŒì°¨") continue;

          const block = document.createElement("div");
          block.className = "block";
          const title = document.createElement("h2");
          title.innerText = `ğŸ”¹ ${label}`;
          block.appendChild(title);

          const table = document.createElement("table");
          const thead = document.createElement("thead");
          thead.innerHTML = "<tr><th>ì˜ˆì¸¡ê°’</th><th>ì‹ ë¢°ë„</th></tr>";
          table.appendChild(thead);

          const tbody = document.createElement("tbody");
          for (const item of predictions) {
            const row = document.createElement("tr");
            row.innerHTML = `<td>${item["ì˜ˆì¸¡ê°’"]}</td><td>${item["ì ìˆ˜"]}</td>`;
            tbody.appendChild(row);
          }
          table.appendChild(tbody);
          block.appendChild(table);

          results.appendChild(block);
        }
      });
  </script>
</body>
</html>
