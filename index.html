<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>분석기 기반 예측 결과</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #eee; padding: 20px; }
    h2 { color: #4fc3f7; border-bottom: 1px solid #4fc3f7; padding-bottom: 5px; }
    .block { margin-bottom: 30px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #444; padding: 8px; text-align: center; }
    th { background-color: #222; }
    td { background-color: #1c1c1c; }
  </style>
</head>
<body>
  <h1>🎯 분석기 기반 예측 Top3</h1>
  <div id="results"></div>

  <script>
    fetch("/predict_analysis")
      .then(res => res.json())
      .then(data => {
        const results = document.getElementById("results");
        for (const [label, predictions] of Object.entries(data)) {
          const block = document.createElement("div");
          block.className = "block";
          const title = document.createElement("h2");
          title.innerText = `🔹 ${label}`;
          block.appendChild(title);

          const table = document.createElement("table");
          const thead = document.createElement("thead");
          thead.innerHTML = "<tr><th>예측값</th><th>신뢰도</th></tr>";
          table.appendChild(thead);

          const tbody = document.createElement("tbody");
          for (const item of predictions) {
            const row = document.createElement("tr");
            row.innerHTML = `<td>${item["예측값"]}</td><td>${item["점수"]}</td>`;
            tbody.appendChild(row);
          }
          table.appendChild(tbody);
          block.appendChild(table);

          results.appendChild(block);
        }
      });
  </script>
</body>
</html>
